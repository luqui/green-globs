<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

<script>
$(function() {

var canvas = $('#canvas')[0];
var cx = canvas.getContext('2d');

var minx = -8;
var maxx = 8;
var miny = -6;
var maxy = 6;
var stepx = (maxx - minx) / canvas.width;

var WT = function(w) { return w * canvas.width / (maxx - minx) };
var XT = function(x) { return WT(x - minx) };
var HT = function(h) { return -h * canvas.height / (maxy - miny) };
var YT = function(y) { return canvas.height + HT(y - miny) };

var drawAxes = function() {
    cx.stokeStyle = '#000';
    cx.beginPath();
    cx.moveTo(XT(minx), YT(0));
    cx.lineTo(XT(maxx), YT(0));
    cx.moveTo(XT(0), YT(miny));
    cx.lineTo(XT(0), YT(maxy));
    cx.stroke();

    cx.strokeStyle = '#ddd';
    cx.beginPath();
    for (var x = minx; x <= maxx; x += 1) {
        cx.moveTo(XT(x), YT(miny));
        cx.lineTo(XT(x), YT(maxy));
    }
    
    for (var y = miny; y <= maxy; y += 1) {
        cx.moveTo(XT(minx), YT(y));
        cx.lineTo(XT(maxx), YT(y));
    }
    cx.stroke();
};

var parseFunction = function(str) {
    return eval('function(x) { return (' + str + ')}');
};

var plotFunction = function(f) {
    cx.strokeStyle = '#a00';
    cx.beginPath();
    cx.moveTo(XT(minx), YT(f(minx)));
    for (var x = minx; x <= maxx; x += stepx) {
        cx.lineTo(XT(x), YT(f(x)));
    }
    cx.stroke();
};

var drawGlobs = function(globs) {
    cx.save();
    for (var i = 0; i < globs.length; i++) {
        var glob = globs[i];
        
        if (glob.type == 'green') {
            cx.fillStyle = '#0a0';
            cx.beginPath();
            cx.arc(XT(glob.coords[0]), YT(glob.coords[1]), WT(0.4), 0, 2*Math.PI);
            cx.fill();
        }
        else if (glob.type == 'stop') {
            cx.lineWidth = 2;
            cx.strokeStyle = '#00a';
            cx.beginPath();
            cx.arc(XT(glob.coords[0]), YT(glob.coords[1]), WT(0.4), 0, 2*Math.PI);
            cx.stroke();
        }
    }
    cx.restore();
};

drawAxes();
drawGlobs([{ type: 'green', coords: [3,4] }, { type: 'stop', coords: [2,5] }]);
plotFunction(parseFunction('x*Math.sin(2*x)'));

})
</script>

<style>
</style>

</head>
<body>
 <canvas id="canvas" width="640" height="480"> 
  Canvas not supported.  Use Firefox or Chrome, kthxbye.
 </canvas>
</body>
</html>
