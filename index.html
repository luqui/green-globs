<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="globs.js"></script>

<script>
$(function() {

var Globs = GlobsModule(jQuery, $('#canvas')[0], {});

var random = function(min,max) {
    return Math.random() * (max - min) + min;
};

var globs = [];
{
    for (var i = 0; i < 6; i++) {
        var coords = [Math.round(random(Globs.minx+1, Globs.maxx-1)), Math.round(random(Globs.miny+1, Globs.maxy-1))];
        globs.push(Globs.GreenGlob(coords));
    }
    for (var i = 0; i < 4; i++) {
        var coords = [Math.round(random(Globs.minx+1, Globs.maxx-1)), Math.round(random(Globs.miny+1, Globs.maxy-1))];
        globs.push(Globs.StopGlob(coords));
    }
}

var state = Globs.newState(globs, function(s) {
    $('#score').text(s.score);
});

Globs.drawAxes();
Globs.drawGlobs(state.globs);

{
    var plot = function() {
        var f = Globs.parse($('.input input').val());
        Globs.run(state, f);
    };
    $('.input button').click(plot);

    $('.input input').keydown(function(e) {
        if (e.keyCode == 13) { plot(); }
    });
}

})
</script>

<style>
.input {
  width: 640px;
  font-size: 20pt;
}
.input * {
  font-size: 20pt;
}
.score {
  font-size: 20pt;
}
.score #score {
  color: red;
}
</style>

</head>
<body>
  <div class="score">
   Score: <span id="score">0</span>
  </div>
  <canvas id="canvas" width="640" height="480"> 
   Canvas not supported.  Use Firefox or Chrome, kthxbye.
  </canvas>
  <div class="input">
    y = <input type="text" />
    <button>Fire</button>
  </div>
</body>
</html>
